# 仕様書: 日本式データ印画像ジェネレーター（SPA）

## 1. 目的
本アプリは、日本で一般的に利用される「データ印（回転式日付印）」風の画像を、Webブラウザ上で手軽に生成するためのシングルページアプリケーション（SPA）である。
ユーザーは、上段文字・日付・下段文字・書体・日付フォーマット・枠線スタイルを指定し、完成した印影画像をPNGまたはSVG形式でダウンロードできる。

## 2. スコープ

### 2.1 対象
- データ印画像の生成
- 文字列および日付の入力
- 日付フォーマット（和暦／西暦、区切り文字）の選択
- 書体（明朝体／ゴシック体）の選択
- 枠線太さ・色のカスタマイズ
- HTML Canvasを用いた描画
- 画像のダウンロード（PNG / SVG、透過背景PNG対応）

### 2.2 非対象
- サーバーサイド処理
- ユーザーアカウント、履歴保存、クラウド保存
- ネットワーク通信（API連携、外部アップロード）

## 3. システム構成

### 3.1 アーキテクチャ
- SPA構成とし、ブラウザ単体で動作する。
- サーバーとの通信は行わない（完全クライアントサイド動作）。
- UIはTailwind CSSで構築する。

### 3.2 レンダリング
- データ印の描画はHTML Canvasで行う。
- ユーザーの入力値変更時にCanvasを再描画する。

## 4. 画面仕様

### 4.1 入力項目
1. 上枠テキスト（任意文字列）
2. 日付（ユーザー指定）
3. 下枠テキスト（任意文字列）
4. フォント種別
   - 明朝体
   - ゴシック体
5. 日付フォーマット
   - 和暦
   - 西暦
6. 日付区切り文字
   - `/`、`-`、`.`、`年/月/日` などの指定可能なプリセットまたは自由入力
7. 枠線太さ
   - 数値指定（例: px単位）
8. 枠線色
   - カラーピッカーまたはカラーコード入力
   - 初期値は赤（例: `#FF0000`）
9. 背景
   - 通常背景
   - 透過背景（PNG出力時）
10. ダウンロード形式
   - PNG
   - SVG

### 4.2 操作要素
- 入力フォーム（テキスト、日付、セレクト、カラー、数値入力、トグル）
- プレビュー領域（Canvas）
- ダウンロードボタン（PNG / SVG）

## 5. データ印デザイン仕様

### 5.1 外形
- 外周は真円の枠線とする。

### 5.2 内部構造
- 真円内部に横線を2本描画し、内部を上・中・下の3領域に分割する。
  - 上領域: ユーザー指定の上枠テキスト
  - 中領域: ユーザー指定の日付
  - 下領域: ユーザー指定の下枠テキスト

### 5.3 文字配置
- 各領域の文字は、原則として領域内の中央揃えで配置する。
- テキストが長すぎる場合は、以下のいずれかで視認性を担保する。
  - フォントサイズ自動縮小
  - 文字数制限
- 日付は可読性を優先し、中央領域の高さに応じた適切な文字サイズを設定する。

### 5.4 書体
- 全領域の文字に対して、ユーザーが選択した書体を一括適用する。
- 書体選択肢:
  - 明朝体
  - ゴシック体
- テキスト色の初期値は赤（例: `#FF0000`）とする。

### 5.5 枠線カスタマイズ
- ユーザーは外周円および内部横線の太さを変更できる。
- ユーザーは枠線色を変更できる。
- 枠線太さの初期値は `3px` とする。
- 枠線色の初期値は赤（例: `#FF0000`）とする。
- 指定した太さ・色はCanvasプレビューおよびPNG/SVG出力に反映される。

### 5.6 日付フォーマット
- 日付表示は和暦／西暦を選択できる。
- 日付の区切り文字（例: `/`、`-`、`.`、`年/月/日`）を指定できる。
- 指定したフォーマットは中央領域の表示およびPNG/SVG出力に反映される。

## 6. 入出力仕様

### 6.1 入力
- 上枠テキスト: 文字列
- 日付: 日付型入力
- 下枠テキスト: 文字列
- 日付フォーマット: 列挙値（和暦 / 西暦）
- 日付区切り文字: 文字列またはプリセット選択値
- フォント種別: 列挙値（明朝体 / ゴシック体）
- テキスト色: 色コード（初期値: `#FF0000`）
- 枠線太さ: 数値（初期値: `3`）
- 枠線色: 色コード（初期値: `#FF0000`）
- 背景透過フラグ（PNG向け）: 真偽値

### 6.2 出力
- Canvas上のプレビュー画像
- ダウンロードファイル
  - PNG: Canvas内容をラスター画像として保存（透過背景を選択可能）
  - SVG: 同等の印影構造をベクター形式として保存

## 7. 機能要件

1. 入力値変更に応じて印影プレビューが即時更新されること。
2. 上・下枠のテキストをユーザーが任意に指定できること。
3. 中央の日付をユーザーが指定できること。
4. 明朝体／ゴシック体を切り替えできること。
5. 日付フォーマット（和暦／西暦）を切り替えできること。
6. 日付区切り文字を指定できること。
7. 枠線太さを変更できること。
8. 枠線色を変更できること。
9. 透過背景PNGを出力できること。
10. 生成した印影をPNGでダウンロードできること。
11. 生成した印影をSVGでダウンロードできること。
12. すべての処理がブラウザ内で完結し、外部通信を行わないこと。

## 8. 非機能要件

### 8.1 パフォーマンス
- 通常利用時（一般的なPCブラウザ）において、入力変更後の再描画は体感的に遅延なく行われること。

### 8.2 互換性
- モダンブラウザ（最新のChrome / Edge / Firefox / Safari）で動作すること。

### 8.3 ユーザビリティ
- シンプルな単一画面で、入力からダウンロードまで直感的に操作できること。
- Tailwind CSSにより、視認性の高いレイアウトと適切な余白・コントラストを確保すること。

### 8.4 セキュリティ・プライバシー
- 入力データをサーバー送信しないこと。
- ローカル生成のみで完結し、個人情報の外部送信リスクを低減すること。

## 9. 将来拡張（任意）
- 文字間隔・行送りの微調整

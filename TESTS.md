# TESTS

## T-001: SPA骨組みとTailwindベースUI

### 実行済みチェック
- `npm run build`
  - 期待結果: 本番ビルドが成功し、`dist/` が生成される。
  - 実績: 成功。`dist/index.html` とアセットが生成された。
- `npm run lint`
  - 期待結果: `src/main.ts` のLintエラーが0件。
  - 実績: 成功。エラー0件。

### 回帰防止テストケース（手動）
1. 画面表示時に単一ページ内に「入力設定」「プレビュー」「履歴（最大10件）」が同時表示される。
2. 入力設定内に以下の操作要素が存在する。
   - 上枠テキスト
   - 日付
   - 下枠テキスト
   - 日付フォーマット（和暦/西暦）
   - 日付区切り文字
   - 書体
   - テキスト色
   - 枠線太さ
   - 枠線色
   - PNG透過背景トグル
   - PNGダウンロードボタン
   - SVGダウンロードボタン
3. プレビュー領域に `reference-layout.svg` が表示される。
4. レイアウトがTailwindの余白・配色により可読性を確保している（背景/カード/入力コントラストが識別可能）。

## T-002: Canvas印影レンダリングエンジン

### 実行済みチェック
- `npm run test -- drawStamp`
  - 期待結果: `drawStamp` と `createStampLayout` のユニットテストが成功する。
  - 実績: 成功。外周円・内部2本線・3領域テキスト描画の呼び出し検証、およびレイアウト座標算出検証をパス。
- `npm run build`
  - 期待結果: 描画モジュール追加後も本番ビルドが成功する。
  - 実績: 成功。`dist/` 生成を確認。
- `npm run lint`
  - 期待結果: 追加した描画ロジックおよびテストコードでLintエラーがない。
  - 実績: 成功。エラー0件。

### 回帰防止テストケース（手動）
1. 初期表示時、Canvasに外周円・内部2本線・上段/中段/下段テキストが描画されている。
2. 上枠テキスト・下枠テキストの入力値変更時、対応する領域テキストが即時更新される。
3. 日付入力変更時、中段テキストが即時更新される。
4. 枠線色・枠線太さ変更時、外周円と内部2本線の見た目が即時更新される。
5. 書体変更時、3領域テキストが同一書体系で再描画される。

### 追加回帰ケース（reference-layout.svg一致性）
6. 初期表示のCanvasプレビューで、外周太線円・内周細線円・横線2本の位置関係が `reference-layout.svg`（viewBox 300x300）と一致する。
7. 上段/中段/下段テキストの基準Y座標がそれぞれ 70 / 150 / 240（300基準）に一致する。

### 追加回帰ケース（ストローク太さ・日本語グリフ）
8. 既定値（枠線太さ3px）で描画した際、外周線が6px・内周線および横線が3px相当で表示され、`reference-layout.svg` の `--base-stroke: 3` 構成と一致する。
9. 初期値として上枠「田中」・下枠「一郎」が表示される。
10. ドキュメント言語が `ja-JP` で、CJKグリフ描画時に日本語フォント優先スタック（Noto/Hiragino/Yu）が利用される。
